<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>draw.io</title>
<meta http-equiv="refresh" content="0;URL='https://app.diagrams.net/#Hxw-yan%2Fdraw-io%2Fmaster%2Fwalt.drawio.html#%7B%22pageId%22%3A%22EuRNjG0Wj1TW9SeWv2jt%22%7D'"/>
<meta charset="utf-8"/>
</head>
<body>
<div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;resize&quot;:true,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; modified=\&quot;2024-06-21T05:44:41.505Z\&quot; agent=\&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36\&quot; etag=\&quot;kSnIHC3_Lu2mOubsJtTC\&quot; version=\&quot;24.6.0\&quot; type=\&quot;github\&quot;&gt;&lt;diagram name=\&quot;Page-1\&quot; id=\&quot;EuRNjG0Wj1TW9SeWv2jt\&quot;&gt;&lt;mxGraphModel dx=\&quot;1434\&quot; dy=\&quot;764\&quot; grid=\&quot;1\&quot; gridSize=\&quot;10\&quot; guides=\&quot;1\&quot; tooltips=\&quot;1\&quot; connect=\&quot;1\&quot; arrows=\&quot;1\&quot; fold=\&quot;1\&quot; page=\&quot;1\&quot; pageScale=\&quot;1\&quot; pageWidth=\&quot;827\&quot; pageHeight=\&quot;1169\&quot; math=\&quot;0\&quot; shadow=\&quot;0\&quot;&gt;&lt;root&gt;&lt;mxCell id=\&quot;0\&quot;/&gt;&lt;mxCell id=\&quot;1\&quot; parent=\&quot;0\&quot;/&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-1\&quot; value=\&quot;&amp;lt;pre style=&amp;quot;border: 0px ; margin-top: 0px ; margin-bottom: 0px ; background-color: rgb(255 , 255 , 255)&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;display: inline&amp;quot; class=&amp;quot;scope-body&amp;quot; id=&amp;quot;scope_id_13444a1e_fold&amp;quot;&amp;gt;&amp;lt;b&amp;gt;void&amp;lt;/b&amp;gt; &amp;lt;a style=&amp;quot;color: rgb(0 , 0 , 255) ; font-weight: bold&amp;quot; name=&amp;quot;scheduler_tick&amp;quot; class=&amp;quot;xf&amp;quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;a style=&amp;quot;color: rgb(0 , 0 , 255) ; font-weight: bold&amp;quot; class=&amp;quot;xf intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?refs=scheduler_tick&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;scheduler_tick&amp;lt;/a&amp;gt;(&amp;lt;b&amp;gt;void&amp;lt;/b&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;/pre&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;40\&quot; y=\&quot;195\&quot; width=\&quot;180\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-2\&quot; value=\&quot;\&quot; style=\&quot;shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;210\&quot; y=\&quot;45\&quot; width=\&quot;20\&quot; height=\&quot;340\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-3\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;endArrow=none;endFill=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-4\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;470\&quot; y=\&quot;50\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-4\&quot; value=\&quot;&amp;lt;pre style=&amp;quot;border: 0px ; margin-top: 0px ; margin-bottom: 0px ; background-color: rgb(255 , 255 , 255)&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;display: inline&amp;quot; class=&amp;quot;scope-body&amp;quot; id=&amp;quot;scope_id_13444a1e_fold&amp;quot;&amp;gt;&amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=walt_set_window_start&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;&amp;lt;b&amp;gt;walt_set_window_start&amp;lt;/b&amp;gt;&amp;lt;/a&amp;gt;(&amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=rq&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;rq&amp;lt;/a&amp;gt;, &amp;amp;amp;&amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=rf&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;rf&amp;lt;/a&amp;gt;);&amp;lt;/span&amp;gt;&amp;lt;/pre&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;align=center;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;230\&quot; y=\&quot;45\&quot; width=\&quot;230\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-5\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;endArrow=none;endFill=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-4\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-4\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-6\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;startArrow=none;startFill=0;endArrow=none;endFill=0;fontSize=11;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-8\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-10\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;620\&quot; y=\&quot;285\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;Array as=\&quot;points\&quot;&gt;&lt;mxPoint x=\&quot;585\&quot; y=\&quot;390\&quot;/&gt;&lt;mxPoint x=\&quot;585\&quot; y=\&quot;315\&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-7\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;startArrow=none;startFill=0;endArrow=none;endFill=0;fontSize=11;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-8\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;619.9999999999995\&quot; y=\&quot;1135\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;Array as=\&quot;points\&quot;&gt;&lt;mxPoint x=\&quot;600\&quot; y=\&quot;390\&quot;/&gt;&lt;mxPoint x=\&quot;600\&quot; y=\&quot;1135\&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-8\&quot; value=\&quot;&amp;lt;pre style=&amp;quot;border: 0px ; margin-top: 0px ; margin-bottom: 0px ; background-color: rgb(255 , 255 , 255)&amp;quot;&amp;gt;&amp;lt;pre style=&amp;quot;border: 0px ; margin-top: 0px ; margin-bottom: 0px&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;display: inline&amp;quot; class=&amp;quot;scope-body&amp;quot; id=&amp;quot;scope_id_13444a1e_fold&amp;quot;&amp;gt;&amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=walt_update_task_ravg&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;&amp;lt;b&amp;gt;walt_update_task_ravg&amp;lt;/b&amp;gt;&amp;lt;/a&amp;gt;(&amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=rq&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;rq&amp;lt;/a&amp;gt;-&amp;amp;gt;&amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=curr&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;curr&amp;lt;/a&amp;gt;, &amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=rq&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;rq&amp;lt;/a&amp;gt;, &amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=TASK_UPDATE&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;TASK_UPDATE&amp;lt;/a&amp;gt;,&amp;lt;/span&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;pre style=&amp;quot;border: 0px ; margin-top: 0px ; margin-bottom: 0px&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;display: inline&amp;quot; class=&amp;quot;scope-body&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;margin-left: 0.2em ; margin-right: 0.2em ; width: 11px ; height: 11px ; display: inline-block&amp;quot; class=&amp;quot;fold-space&amp;quot;&amp;gt;&amp;amp;nbsp;&amp;lt;/span&amp;gt;&amp;#9;&amp;#9;&amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=walt_ktime_clock&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;walt_ktime_clock&amp;lt;/a&amp;gt;(), 0);&amp;lt;/span&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/pre&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;230\&quot; y=\&quot;365\&quot; width=\&quot;350\&quot; height=\&quot;50\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-9\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-10\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-13\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-10\&quot; value=\&quot;&amp;lt;pre style=&amp;quot;border: 0px ; margin-top: 0px ; margin-bottom: 0px ; background-color: rgb(255 , 255 , 255)&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;display: inline&amp;quot; class=&amp;quot;scope-body&amp;quot; id=&amp;quot;scope_id_92de8955_fold&amp;quot;&amp;gt;/**更新窗口开始时间点**/&amp;lt;br&amp;gt;&amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=old_window_start&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;old_window_start&amp;lt;/a&amp;gt; = &amp;lt;a style=&amp;quot;color: rgb(153 , 0 , 153) ; font-weight: bold&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/xref/sprdroid9.0_trunk_19b/kernel4.14/kernel/sched/walt.c?r=5cbe9226#update_window_start&amp;quot; class=&amp;quot;d intelliWindow-symbol&amp;quot;&amp;gt;update_window_start&amp;lt;/a&amp;gt;(&amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=rq&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;rq&amp;lt;/a&amp;gt;, &amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=wallclock&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;wallclock&amp;lt;/a&amp;gt;);&amp;lt;/span&amp;gt;&amp;lt;/pre&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;605\&quot; y=\&quot;295\&quot; width=\&quot;410\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-11\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0.1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=17;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-13\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-101\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;Array as=\&quot;points\&quot;&gt;&lt;mxPoint x=\&quot;1003\&quot; y=\&quot;475\&quot;/&gt;&lt;mxPoint x=\&quot;1003\&quot; y=\&quot;525\&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-12\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=17;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-13\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-128\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-13\&quot; value=\&quot;&amp;lt;pre style=&amp;quot;border: 0px ; margin-top: 0px ; margin-bottom: 0px ; background-color: rgb(255 , 255 , 255)&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;display: inline&amp;quot; class=&amp;quot;scope-body&amp;quot; id=&amp;quot;scope_id_92de8955_fold&amp;quot;&amp;gt;/**通过统计和计算进程在当前时间点和进程的mark_start时间点&amp;lt;/span&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;pre style=&amp;quot;border: 0px ; margin-top: 0px ; margin-bottom: 0px ; background-color: rgb(255 , 255 , 255)&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;display: inline&amp;quot; class=&amp;quot;scope-body&amp;quot;&amp;gt;，考虑CPU的频率从与cap，计算WALT时间，然后根据policy，得到&amp;lt;/span&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;pre style=&amp;quot;border: 0px ; margin-top: 0px ; margin-bottom: 0px ; background-color: rgb(255 , 255 , 255)&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;display: inline&amp;quot; class=&amp;quot;scope-body&amp;quot;&amp;gt;demand时间，更新至p-&amp;amp;gt;ravg.demand，表示进程在下一个&amp;lt;/span&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;pre style=&amp;quot;border: 0px ; margin-top: 0px ; margin-bottom: 0px ; background-color: rgb(255 , 255 , 255)&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;display: inline&amp;quot; class=&amp;quot;scope-body&amp;quot;&amp;gt;统计窗口里的WALT时间期望&amp;lt;/span&amp;gt;值**/&amp;lt;/pre&amp;gt;&amp;lt;pre style=&amp;quot;border: 0px ; margin-top: 0px ; margin-bottom: 0px ; background-color: rgb(255 , 255 , 255)&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;display: inline&amp;quot; class=&amp;quot;scope-body&amp;quot;&amp;gt;&amp;lt;a style=&amp;quot;color: rgb(153 , 0 , 153) ; font-weight: bold&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/xref/sprdroid9.0_trunk_19b/kernel4.14/kernel/sched/walt.c?r=5cbe9226#update_task_demand&amp;quot; class=&amp;quot;d intelliWindow-symbol&amp;quot;&amp;gt;update_task_demand&amp;lt;/a&amp;gt;(&amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=p&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;p&amp;lt;/a&amp;gt;, &amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=rq&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;rq&amp;lt;/a&amp;gt;, &amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=event&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;event&amp;lt;/a&amp;gt;, &amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=wallclock&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;wallclock&amp;lt;/a&amp;gt;);&amp;lt;/span&amp;gt;&amp;lt;/pre&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;620\&quot; y=\&quot;465\&quot; width=\&quot;380\&quot; height=\&quot;80\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-14\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=16;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-15\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-19\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-15\&quot; value=\&quot;&amp;lt;pre style=&amp;quot;border: 0px ; margin-top: 0px ; margin-bottom: 0px ; background-color: rgb(255 , 255 , 255)&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;display: inline&amp;quot; class=&amp;quot;scope-body&amp;quot;&amp;gt;/**将CPU的cap以及频率考虑进去计算WALT运行时间,相当于把不同&amp;lt;/span&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;pre style=&amp;quot;border: 0px ; margin-top: 0px ; margin-bottom: 0px ; background-color: rgb(255 , 255 , 255)&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;display: inline&amp;quot; class=&amp;quot;scope-body&amp;quot;&amp;gt;CPU和不同CPU运行频率映射至一个度量尺度上**/&amp;lt;/span&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;pre style=&amp;quot;border: 0px ; margin-top: 0px ; margin-bottom: 0px ; background-color: rgb(255 , 255 , 255)&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;display: inline&amp;quot; class=&amp;quot;scope-body&amp;quot; id=&amp;quot;scope_id_b66837c4_fold&amp;quot;&amp;gt; &amp;lt;a style=&amp;quot;color: rgb(153 , 102 , 51) ; font-weight: bold&amp;quot; name=&amp;quot;window_scale&amp;quot; class=&amp;quot;xl&amp;quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;a style=&amp;quot;color: rgb(153 , 102 , 51) ; font-weight: bold&amp;quot; class=&amp;quot;xl intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?refs=window_scale&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;window_scale&amp;lt;/a&amp;gt; = &amp;lt;a style=&amp;quot;color: rgb(153 , 0 , 153) ; font-weight: bold&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/xref/sprdroid9.0_trunk_19b/kernel4.14/kernel/sched/walt.c?r=5cbe9226#scale_exec_time&amp;quot; class=&amp;quot;d intelliWindow-symbol&amp;quot;&amp;gt;scale_exec_time&amp;lt;/a&amp;gt;(&amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=window_size&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;window_size&amp;lt;/a&amp;gt;, &amp;lt;a style=&amp;quot;color: rgb(32 , 32 , 98)&amp;quot; class=&amp;quot;intelliWindow-symbol&amp;quot; href=&amp;quot;http://10.0.1.79:8081/source/s?defs=rq&amp;amp;amp;project=sprdroid9.0_trunk_19b&amp;quot;&amp;gt;rq&amp;lt;/a&amp;gt;);&amp;lt;/span&amp;gt;&amp;lt;/pre&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1070.5\&quot; y=\&quot;427.17999999999995\&quot; width=\&quot;370\&quot; height=\&quot;50\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-16\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=16;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-19\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-22\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-17\&quot; value=\&quot;&amp;lt;div&amp;gt;&amp;lt;b style=&amp;quot;background-color: rgb(255 , 255 , 153)&amp;quot;&amp;gt;static int account_busy_for_cpu_time(struct rq *rq,&amp;amp;nbsp;&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;background-color: rgb(255 , 255 , 153)&amp;quot;&amp;gt;&amp;lt;b&amp;gt;struct task_struct *p,&amp;amp;nbsp;&amp;lt;/b&amp;gt;&amp;lt;b&amp;gt;u64 irqtime, int event)&amp;lt;/b&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;\&quot; style=\&quot;swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;labelBackgroundColor=none;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1500.5\&quot; y=\&quot;45\&quot; width=\&quot;460\&quot; height=\&quot;260\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle x=\&quot;1170\&quot; y=\&quot;30\&quot; width=\&quot;280\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-18\&quot; value=\&quot;if (is_idle_task(p)) {&amp;#10;&amp;#9;&amp;#9;/* TASK_WAKE &amp;amp;&amp;amp; TASK_MIGRATE is not possible on idle task! */&amp;#10;&amp;#9;&amp;#9;if (event == PICK_NEXT_TASK)&amp;#10;&amp;#9;&amp;#9;&amp;#9;return 0;&amp;#10;&amp;#9;&amp;#9;/* PUT_PREV_TASK, TASK_UPDATE &amp;amp;&amp;amp; IRQ_UPDATE are left */&amp;#10;&amp;#9;&amp;#9;return irqtime || cpu_is_waiting_on_io(rq);&amp;#10;&amp;#9;}&amp;#10;/**进程处于睡眠状态，则不统计curr_runnable_sum和prev_runnable_sum&amp;#10;&amp;#9;if (event == TASK_WAKE)&amp;#10;&amp;#9;&amp;#9;return 0;&amp;#10;&amp;#10;&amp;#9;if (event == PUT_PREV_TASK || event == IRQ_UPDATE || event == TASK_UPDATE)&amp;#10;&amp;#9;&amp;#9;return 1;&amp;#10;&amp;#10;&amp;#9;/* Only TASK_MIGRATE &amp;amp;&amp;amp; PICK_NEXT_TASK left */&amp;#10;&amp;#9;return walt_freq_account_wait_time;     //0\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-17\&quot;&gt;&lt;mxGeometry y=\&quot;26\&quot; width=\&quot;460\&quot; height=\&quot;234\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-19\&quot; value=\&quot;/**比较MS与WS作为有无新窗口依据**/&amp;lt;br&amp;gt;&amp;lt;b&amp;gt;new_window&amp;lt;/b&amp;gt; = mark_start &amp;amp;lt; window_start;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=none;gradientColor=none;fillColor=#FFFFFF;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1130.5\&quot; y=\&quot;555\&quot; width=\&quot;250\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-20\&quot; style=\&quot;edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-22\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-27\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-21\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-22\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-42\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-22\&quot; value=\&quot;排除不需要统计的进程类型：(exiting，idlle，waking_up)&amp;lt;br&amp;gt;account_busy_for_task_demand(p, event)\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1090\&quot; y=\&quot;645\&quot; width=\&quot;331\&quot; height=\&quot;160\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-23\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=16;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-24\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-34\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-24\&quot; value=\&quot;&amp;lt;div&amp;gt;update_history(rq, p, p-&amp;amp;gt;ravg.sum, 1, event);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;if (sysctl_sched_walt_cross_window_util)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;p-&amp;amp;gt;ravg.sum = 0;&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1660\&quot; y=\&quot;698.5\&quot; width=\&quot;260\&quot; height=\&quot;53\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-25\&quot; style=\&quot;edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=16;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-27\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-24\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-26\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=16;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-27\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-34\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-27\&quot; value=\&quot;new_window\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;fontSize=16;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1500\&quot; y=\&quot;675\&quot; width=\&quot;100\&quot; height=\&quot;100\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-28\&quot; value=\&quot;&amp;lt;b style=&amp;quot;background-color: rgb(255 , 255 , 51)&amp;quot;&amp;gt;static int account_busy_for_task_demand(&amp;lt;br&amp;gt;struct task_struct *p, int event)&amp;lt;/b&amp;gt;\&quot; style=\&quot;swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;labelBackgroundColor=none;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1970\&quot; y=\&quot;40\&quot; width=\&quot;370\&quot; height=\&quot;220\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle x=\&quot;1170\&quot; y=\&quot;30\&quot; width=\&quot;280\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-29\&quot; value=\&quot;bool account_wait_time = walt_account_wait_time &amp;gt; 0;&amp;#10;&amp;#10;&amp;#9;/* 对于正在退出的进程或者idle进程不需要更新demand. */&amp;#10;&amp;#9;if (exiting_task(p) || is_idle_task(p))&amp;#10;    return 0;&amp;#10;&amp;#9;account_wait_time = schedtune_account_wait_time(p) &amp;gt; 0;&amp;#10;&amp;#9;/* 对于睡眠进程和MIGRATE进程不需要继续统计demand，对于处于&amp;#10;就绪队列等待状态的进程，根据宏walt_account_wait_time是否为1来&amp;#10;决定他是否需要继续统计demand*/&amp;#10;&amp;#9;if (event == TASK_WAKE || (!account_wait_time &amp;amp;&amp;amp;&amp;#10;&amp;#9;&amp;#9;&amp;#9; (event == PICK_NEXT_TASK || event == TASK_MIGRATE)))&amp;#10;    return 0;&amp;#10;&amp;#9;return 1;\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-28\&quot;&gt;&lt;mxGeometry y=\&quot;26\&quot; width=\&quot;370\&quot; height=\&quot;194\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-30\&quot; value=\&quot;&amp;lt;font style=&amp;quot;font-size: 18px&amp;quot;&amp;gt;struct ravg&amp;amp;nbsp; //task_struct结构体中的成员&amp;lt;/font&amp;gt;\&quot; style=\&quot;swimlane;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;rounded=1;fontSize=14;fontStyle=0;strokeWidth=2;resizeParent=0;resizeLast=1;shadow=0;dashed=0;align=center;labelBackgroundColor=#FFFFFF;fillColor=#FFFF33;gradientColor=none;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1050.5\&quot; y=\&quot;40\&quot; width=\&quot;409.5\&quot; height=\&quot;130\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-31\&quot; value=\&quot;u64 mark_start; //标记进程开始统计的时间点&amp;#10;&amp;#9;u32 sum, demand, sum_latest; //当前统计窗口已经运行的WALT时间&amp;#10;u32 demand;  // 根据过去几个统计窗口得到的当前进程的WALT时间请求值&amp;#10; u32 sum_history[RAVG_HIST_SIZE_MAX]; //记录过去6个统计窗口的数据&amp;#10;&amp;#9;u32 curr_window, prev_window;//当前窗口与之前窗口&amp;#10;&amp;#9;u16 active_windows;\&quot; style=\&quot;align=left;strokeColor=none;fillColor=none;spacingLeft=4;fontSize=12;verticalAlign=top;resizable=0;rotatable=0;part=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-30\&quot;&gt;&lt;mxGeometry y=\&quot;30\&quot; width=\&quot;409.5\&quot; height=\&quot;100\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-32\&quot; value=\&quot;返回\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1515\&quot; y=\&quot;865\&quot; width=\&quot;70\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-33\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=16;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-34\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-32\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-34\&quot; value=\&quot;p-&amp;amp;gt;ravg.sum_latest = 0;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1475\&quot; y=\&quot;805\&quot; width=\&quot;150\&quot; height=\&quot;33\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-35\&quot; value=\&quot;0\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=16;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1430\&quot; y=\&quot;702\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-36\&quot; value=\&quot;1\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=16;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1610\&quot; y=\&quot;702\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-37\&quot; value=\&quot;0\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=16;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1550\&quot; y=\&quot;775\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-38\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.001;entryY=0.394;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-42\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-44\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-39\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-42\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-67\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-40\&quot; value=\&quot;&amp;lt;font style=&amp;quot;font-size: 18px&amp;quot;&amp;gt;struct rq&amp;lt;/font&amp;gt;\&quot; style=\&quot;swimlane;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;rounded=1;fontSize=14;fontStyle=0;strokeWidth=2;resizeParent=0;resizeLast=1;shadow=0;dashed=0;align=center;labelBackgroundColor=#FFFFFF;fillColor=#FFFF33;gradientColor=none;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1045.5\&quot; y=\&quot;170\&quot; width=\&quot;409.5\&quot; height=\&quot;230\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-41\&quot; value=\&quot;u64 cumulative_runnable_avg;&amp;#10;&amp;#9;u64 window_start;    //WALT窗口开始时间&amp;#10;&amp;#9;u64 curr_runnable_sum; //当前窗口walt累积&amp;#10;&amp;#9;u64 prev_runnable_sum;//之前窗口walt累积&amp;#10;&amp;#9;u64 nt_curr_runnable_sum，nt_prev_runnable_sum;&amp;#10;&amp;#9;u64 cur_irqload，avg_irqload;&amp;#10;&amp;#9;u64 irqload_ts;&amp;#10;&amp;#9;u64 cum_window_demand;&amp;#10;&amp;#9;enum {&amp;#10;&amp;#9;&amp;#9;CPU_BUSY_CLR = 0,&amp;#10;&amp;#9;&amp;#9;CPU_BUSY_PREPARE,&amp;#10;&amp;#9;&amp;#9;CPU_BUSY_SET,&amp;#10;&amp;#9;} is_busy;\&quot; style=\&quot;align=left;strokeColor=none;fillColor=none;spacingLeft=4;fontSize=12;verticalAlign=top;resizable=0;rotatable=0;part=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-40\&quot;&gt;&lt;mxGeometry y=\&quot;30\&quot; width=\&quot;409.5\&quot; height=\&quot;200\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-42\&quot; value=\&quot;new_window\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1170.5\&quot; y=\&quot;905\&quot; width=\&quot;170\&quot; height=\&quot;100\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-43\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-63\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;1605\&quot; y=\&quot;985\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-44\&quot; value=\&quot;/**从进程开始统计到现在没有横跨新窗口，直接将WC-MS后scale后的时间累加至p-&amp;amp;gt;ravg-&amp;amp;gt;sum中**/&amp;lt;br&amp;gt;&amp;lt;b&amp;gt;add_to_task_demand&amp;lt;/b&amp;gt;(rq, p, wallclock - mark_start);\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1455\&quot; y=\&quot;935\&quot; width=\&quot;300\&quot; height=\&quot;50\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-45\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2160\&quot; y=\&quot;1070\&quot; width=\&quot;160\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-46\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;rounded=0;labelBackgroundColor=none;strokeWidth=1;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2160\&quot; y=\&quot;1040\&quot; width=\&quot;160\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-47\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;startArrow=classic;html=1;fontSize=15;entryX=1;entryY=0.333;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.003;exitY=0.341;exitDx=0;exitDy=0;exitPerimeter=0;dashed=1;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-46\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-46\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;2190\&quot; y=\&quot;1050\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;2240\&quot; y=\&quot;1000\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-48\&quot; value=\&quot;&amp;lt;font style=&amp;quot;font-size: 13px&amp;quot;&amp;gt;Windows_size = 16ms&amp;lt;/font&amp;gt;\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2165\&quot; y=\&quot;1030\&quot; width=\&quot;150\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-49\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;fontSize=15;entryX=0;entryY=1;entryDx=0;entryDy=0;dashed=1;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-45\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;2160\&quot; y=\&quot;1120\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;2200\&quot; y=\&quot;1100\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-50\&quot; value=\&quot;WS\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2140\&quot; y=\&quot;1120\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-51\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;fontSize=15;entryX=0;entryY=1;entryDx=0;entryDy=0;dashed=1;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;2210\&quot; y=\&quot;1120\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;2210\&quot; y=\&quot;1100\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-52\&quot; value=\&quot;MS\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2190\&quot; y=\&quot;1120\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-53\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;fontSize=15;entryX=0;entryY=1;entryDx=0;entryDy=0;dashed=1;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;2260\&quot; y=\&quot;1120\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;2260\&quot; y=\&quot;1100\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-54\&quot; value=\&quot;WC\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2240\&quot; y=\&quot;1120\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-55\&quot; value=\&quot;delta\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2215\&quot; y=\&quot;1080\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-56\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;rounded=0;labelBackgroundColor=none;strokeWidth=1;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2210\&quot; y=\&quot;1080\&quot; width=\&quot;50\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-57\&quot; value=\&quot;No\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1335\&quot; y=\&quot;930\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-58\&quot; value=\&quot;1\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1250\&quot; y=\&quot;845\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-59\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-60\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-65\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;Array as=\&quot;points\&quot;&gt;&lt;mxPoint x=\&quot;1910\&quot; y=\&quot;1215\&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-60\&quot; value=\&quot;&amp;lt;div&amp;gt;if (!task_has_dl_policy(p) || !p-&amp;amp;gt;dl.dl_throttled) {&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;//若进程状态为runnable,更新rq-&amp;amp;gt;cumulative_runnable_avg与&amp;lt;/div&amp;gt;&amp;lt;span&amp;gt;if (task_on_rq_queued(p))&amp;lt;/span&amp;gt;&amp;lt;span&amp;gt;&amp;amp;nbsp;&amp;lt;/span&amp;gt;&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;b&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp; &amp;amp;nbsp; &amp;amp;nbsp; &amp;amp;nbsp;fixup_cumulative_runnable_avg&amp;lt;/b&amp;gt;(&amp;lt;span&amp;gt;rq, p, p-&amp;amp;gt;ravg.sum);&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;//若进程为running状态，更新rq-&amp;amp;gt;cum_window_demand;&amp;lt;span&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;else if (rq-&amp;amp;gt;curr == p)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp; &amp;amp;nbsp; &amp;amp;nbsp; &amp;amp;nbsp;&amp;lt;b&amp;gt;fixup_cum_window_demand&amp;lt;/b&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span&amp;gt;rq, p-&amp;amp;gt;ravg.sum);&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;//更新demand&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;p-&amp;amp;gt;ravg.demand = p-&amp;amp;gt;ravg.sum;&amp;lt;br&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;align=left;verticalAlign=top;horizontal=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1740\&quot; y=\&quot;1025\&quot; width=\&quot;340\&quot; height=\&quot;140\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-61\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-63\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-65\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-62\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-63\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-60\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-63\&quot; value=\&quot;前面累加的p-&amp;amp;gt;ravg-&amp;amp;gt;sum已经超过&amp;lt;br&amp;gt;p-&amp;amp;gt;ravg-&amp;amp;gt;demand并且policy为&amp;lt;br&amp;gt;WINDOW_STATS_MAX\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1490\&quot; y=\&quot;1045\&quot; width=\&quot;230\&quot; height=\&quot;100\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-64\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-60\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-60\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-65\&quot; value=\&quot;返回\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1570\&quot; y=\&quot;1195\&quot; width=\&quot;70\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-66\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=19;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-67\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-91\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-67\&quot; value=\&quot;/**有新窗口说明，task横跨了至少一个窗口，计算横跨的窗口数，并暂时将WS放到距离MS最近的窗口临界点**/&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;delta = window_start - mark_start;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;lt;/span&amp;gt;nr_full_windows = div64_u64(delta, window_size);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;lt;/span&amp;gt;window_start -= (u64)nr_full_windows * (u64)window_size;&amp;lt;/div&amp;gt;\&quot; style=\&quot;whiteSpace=wrap;html=1;rounded=0;fontSize=17;strokeWidth=2;fillColor=#FFFFFF;verticalAlign=middle;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1015.5\&quot; y=\&quot;1105\&quot; width=\&quot;480\&quot; height=\&quot;110\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-68\&quot; value=\&quot;YES\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1260\&quot; y=\&quot;1045\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-69\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2150\&quot; y=\&quot;1310\&quot; width=\&quot;160\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-70\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;rounded=0;labelBackgroundColor=none;strokeWidth=1;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2150\&quot; y=\&quot;1280\&quot; width=\&quot;160\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-71\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;startArrow=classic;html=1;fontSize=15;entryX=1;entryY=0.333;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.003;exitY=0.341;exitDx=0;exitDy=0;exitPerimeter=0;dashed=1;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-70\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-70\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;2180\&quot; y=\&quot;1290\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;2230\&quot; y=\&quot;1240\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-72\&quot; value=\&quot;&amp;lt;font style=&amp;quot;font-size: 13px&amp;quot;&amp;gt;Windows_size = 16ms&amp;lt;/font&amp;gt;\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2155\&quot; y=\&quot;1270\&quot; width=\&quot;150\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-73\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;fontSize=15;entryX=0;entryY=1;entryDx=0;entryDy=0;dashed=1;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-84\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-69\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;2150\&quot; y=\&quot;1360\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;2190\&quot; y=\&quot;1340\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-74\&quot; value=\&quot;WS\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2130\&quot; y=\&quot;1400\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-75\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;fontSize=15;entryX=0;entryY=1;entryDx=0;entryDy=0;dashed=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-76\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;1749.5\&quot; y=\&quot;1360\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;1749.5\&quot; y=\&quot;1340\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-76\&quot; value=\&quot;MS\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1730\&quot; y=\&quot;1400\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-77\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;fontSize=15;entryX=0;entryY=1;entryDx=0;entryDy=0;dashed=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-78\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;2250\&quot; y=\&quot;1360\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;2250\&quot; y=\&quot;1340\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-78\&quot; value=\&quot;WC\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2230\&quot; y=\&quot;1400\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-79\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;fontSize=17;dashed=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1990\&quot; y=\&quot;1310\&quot; width=\&quot;160\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-80\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;fontSize=17;dashed=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1830\&quot; y=\&quot;1310\&quot; width=\&quot;160\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-81\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1670\&quot; y=\&quot;1310\&quot; width=\&quot;160\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-82\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;rounded=0;labelBackgroundColor=none;strokeWidth=1;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1750\&quot; y=\&quot;1290\&quot; width=\&quot;80\&quot; height=\&quot;70\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-83\&quot; value=\&quot;T0\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;labelBackgroundColor=none;fontSize=22;strokeWidth=2;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1770\&quot; y=\&quot;1360\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-84\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;rounded=0;labelBackgroundColor=none;strokeWidth=1;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1830\&quot; y=\&quot;1340\&quot; width=\&quot;320\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-85\&quot; value=\&quot;T1\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;labelBackgroundColor=none;fontSize=22;strokeWidth=2;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1970\&quot; y=\&quot;1360\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-86\&quot; value=\&quot;T2\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;labelBackgroundColor=none;fontSize=22;strokeWidth=2;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2180\&quot; y=\&quot;1360\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-87\&quot; value=\&quot;WS_temp\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1810\&quot; y=\&quot;1400\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-88\&quot; value=\&quot;\&quot; style=\&quot;shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelBackgroundColor=none;strokeWidth=2;fillColor=#FFFFFF;gradientColor=none;fontSize=22;align=center;direction=south;size=0.5;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1830\&quot; y=\&quot;1260\&quot; width=\&quot;320\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-89\&quot; value=\&quot;nr个窗口\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1910\&quot; y=\&quot;1235\&quot; width=\&quot;160\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-90\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=17;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-91\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-94\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-91\&quot; value=\&quot;/**将右侧的T0时间量化后加入到&amp;lt;span style=&amp;quot;font-size: 17px&amp;quot;&amp;gt;p-&amp;amp;gt;ravg.sum中，然后更新p-&amp;amp;gt;ravg-&amp;amp;gt;sum_history和p-&amp;amp;gt;ravg-&amp;amp;gt;demand**/&amp;lt;/span&amp;gt;&amp;lt;br style=&amp;quot;font-size: 17px&amp;quot;&amp;gt;&amp;lt;b&amp;gt;add_to_task_demand&amp;lt;/b&amp;gt;(rq, p, window_start - mark_start);&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;&amp;lt;b&amp;gt;update_history&amp;lt;/b&amp;gt;(rq, p, p-&amp;amp;gt;ravg.sum, 1, event);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;p-&amp;amp;gt;ravg.sum = p-&amp;amp;gt;ravg.sum_latest;&amp;lt;/div&amp;gt;\&quot; style=\&quot;whiteSpace=wrap;html=1;rounded=0;fontSize=17;strokeWidth=2;fillColor=#FFFFFF;align=left;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1030.75\&quot; y=\&quot;1265\&quot; width=\&quot;449.5\&quot; height=\&quot;105\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-92\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=17;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-94\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-96\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-93\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=17;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-94\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-99\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-94\&quot; value=\&quot;是否横跨多个窗口？\&quot; style=\&quot;rhombus;whiteSpace=wrap;html=1;rounded=0;fontSize=17;align=center;strokeWidth=2;fillColor=#FFFFFF;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1120.5\&quot; y=\&quot;1430\&quot; width=\&quot;270\&quot; height=\&quot;75\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-95\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=17;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-96\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-99\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-96\&quot; value=\&quot;&amp;lt;div&amp;gt;/**计算右图中T1时间，更新p-&amp;amp;gt;ravg-&amp;amp;gt;sum_history和p-&amp;amp;gt;ravg-&amp;amp;gt;demand**/&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;b&amp;gt;update_history&amp;lt;/b&amp;gt;(rq, p, window_scale,&amp;lt;span&amp;gt;nr_full_windows, event);&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;p-&amp;amp;gt;ravg.sum = window_scale;&amp;lt;br&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;\&quot; style=\&quot;whiteSpace=wrap;html=1;rounded=0;fontSize=17;strokeWidth=2;fillColor=#FFFFFF;align=left;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1447.75\&quot; y=\&quot;1437.19\&quot; width=\&quot;572.25\&quot; height=\&quot;60.62\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-97\&quot; value=\&quot;YES\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1390.5\&quot; y=\&quot;1444.38\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-98\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=17;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-99\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-102\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-99\&quot; value=\&quot;&amp;lt;div&amp;gt;/**计算T2时间，更新p-&amp;amp;gt;ravg.sum**/&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;window_start += (u64)nr_full_windows * (u64)window_size;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;lt;/span&amp;gt;mark_start = window_start;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;lt;/span&amp;gt;add_to_task_demand(rq, p, wallclock - mark_start);&amp;lt;/div&amp;gt;\&quot; style=\&quot;whiteSpace=wrap;html=1;rounded=0;fontSize=17;strokeWidth=2;fillColor=#FFFFFF;align=left;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1028.25\&quot; y=\&quot;1545\&quot; width=\&quot;454.5\&quot; height=\&quot;100\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-100\&quot; value=\&quot;NO\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1260\&quot; y=\&quot;1525\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-101\&quot; value=\&quot;\&quot; style=\&quot;shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelBackgroundColor=none;strokeWidth=2;fillColor=#FFFFFF;gradientColor=none;fontSize=17;align=left;size=0.5;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1000\&quot; y=\&quot;425\&quot; width=\&quot;28.25\&quot; height=\&quot;1250\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-102\&quot; value=\&quot;结束\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1225.5\&quot; y=\&quot;1655\&quot; width=\&quot;60\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-103\&quot; value=\&quot;5\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2010.5\&quot; y=\&quot;505\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-104\&quot; value=\&quot;&amp;lt;span style=&amp;quot;text-align: left&amp;quot;&amp;gt;prev5&amp;lt;/span&amp;gt;\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2040.5\&quot; y=\&quot;505\&quot; width=\&quot;50\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-105\&quot; value=\&quot;5\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2190.5\&quot; y=\&quot;505\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-106\&quot; value=\&quot;&amp;lt;span style=&amp;quot;text-align: left&amp;quot;&amp;gt;prev4&amp;lt;/span&amp;gt;\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2220.5\&quot; y=\&quot;505\&quot; width=\&quot;50\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-107\&quot; style=\&quot;edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=12;exitX=1;exitY=0.5;exitDx=0;exitDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-199\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-218\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-108\&quot; style=\&quot;edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=12;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-202\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-221\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-109\&quot; style=\&quot;edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=12;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-205\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-224\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-110\&quot; style=\&quot;edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=12;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-208\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-227\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-111\&quot; style=\&quot;edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=12;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-211\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;2180.5\&quot; y=\&quot;515\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-112\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=13;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-113\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-215\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-113\&quot; value=\&quot;runtime\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=none;strokeWidth=2;fillColor=#FFFFFF;gradientColor=none;fontSize=13;align=center;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2120.5\&quot; y=\&quot;295\&quot; width=\&quot;55\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-114\&quot; value=\&quot;&amp;lt;div style=&amp;quot;font-size: 14px&amp;quot;&amp;gt;void &amp;lt;b&amp;gt;update_history&amp;lt;/b&amp;gt;(struct rq *rq, struct task_struct *p,&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;font-size: 14px&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 14px&amp;quot;&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt; u32 runtime, int samples, int event)&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;labelBackgroundColor=none;gradientColor=none;fontSize=14;fillColor=#FFFF66;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1710\&quot; y=\&quot;555\&quot; width=\&quot;250.5\&quot; height=\&quot;70\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-115\&quot; value=\&quot;\&quot; style=\&quot;shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelBackgroundColor=none;strokeWidth=2;fillColor=#FFFF66;gradientColor=none;fontSize=14;align=center;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1970\&quot; y=\&quot;265\&quot; width=\&quot;20\&quot; height=\&quot;650\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-116\&quot; value=\&quot;\&quot; style=\&quot;shape=singleArrow;direction=south;whiteSpace=wrap;html=1;rounded=0;labelBackgroundColor=none;strokeWidth=2;gradientColor=none;fontSize=14;align=center;fillColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2130.5\&quot; y=\&quot;521.09\&quot; width=\&quot;40\&quot; height=\&quot;53.91\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-117\&quot; value=\&quot;首先对sum_history进行“压栈”操作\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=13;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2020.5\&quot; y=\&quot;275\&quot; width=\&quot;270\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-118\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=13;exitX=0.5;exitY=1;exitDx=0;exitDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-119\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-121\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;2175.5000000000005\&quot; y=\&quot;801.5\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-119\&quot; value=\&quot;/**根据policy的值来得到demand的结果**/&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;if (walt_window_stats_policy == &amp;lt;b&amp;gt;WINDOW_STATS_RECENT&amp;lt;/b&amp;gt;) {&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;&amp;lt;b&amp;gt;demand = runtime&amp;lt;/b&amp;gt;;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;lt;/span&amp;gt;} else if (walt_window_stats_policy == &amp;lt;b&amp;gt;WINDOW_STATS_MAX&amp;lt;/b&amp;gt;) {&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;&amp;lt;b&amp;gt;demand = max&amp;lt;/b&amp;gt;;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;lt;/span&amp;gt;} else {&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;avg = div64_u64(sum, walt_ravg_hist_size);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;if (walt_window_stats_policy == &amp;lt;b&amp;gt;WINDOW_STATS_AVG&amp;lt;/b&amp;gt;)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;&amp;lt;b&amp;gt;demand = avg&amp;lt;/b&amp;gt;;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;else&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;b&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;demand = max(avg, runtime);&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;lt;/span&amp;gt;}&amp;lt;/div&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;strokeWidth=2;fillColor=none;gradientColor=none;fontSize=13;align=left;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1990\&quot; y=\&quot;575\&quot; width=\&quot;370\&quot; height=\&quot;220\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-120\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=16;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-121\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-122\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-121\&quot; value=\&quot;&amp;lt;div style=&amp;quot;font-size: 17px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 17px;&amp;quot;&amp;gt;/**更新p-&amp;amp;gt;ravg.demand**/&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;font-size: 17px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 17px;&amp;quot;&amp;gt;p-&amp;amp;gt;ravg.demand = demand;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;\&quot; style=\&quot;whiteSpace=wrap;html=1;rounded=0;fontSize=17;align=center;strokeWidth=2;fillColor=none;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2055\&quot; y=\&quot;835\&quot; width=\&quot;240\&quot; height=\&quot;50\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-122\&quot; value=\&quot;返回\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2150.5\&quot; y=\&quot;915\&quot; width=\&quot;50\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-123\&quot; value=\&quot;static u64 scale_exec_time(u64 delta, struct rq *rq)\&quot; style=\&quot;swimlane;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;rounded=1;fontSize=14;fontStyle=0;strokeWidth=2;resizeParent=0;resizeLast=1;shadow=0;dashed=0;align=center;strokeOpacity=100;fillOpacity=0;swimlaneFillColor=#FFFF99;labelBackgroundColor=#FFFF66;fillColor=#FFFFFF;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1460\&quot; y=\&quot;385\&quot; width=\&quot;450\&quot; height=\&quot;134.35\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle x=\&quot;1440\&quot; y=\&quot;530\&quot; width=\&quot;400\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-124\&quot; value=\&quot;\&quot; style=\&quot;shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png,iVBORw0KGgoAAAANSUhEUgAAAYIAAAA7CAIAAAD5KhrXAAAUVklEQVR4Ae1dIZurPBPFIZFIJBIZGRmJRCKRSH4CEllZiUQi+RwSiUQikZF8z0wgBAotdLu79943FbsUQjKcNqfJZM7EGPVLI6AR0Aj8KgLGr7auG9cIaAQ0AqOmIf0l0AhoBH4ZAU1Dv/wB6OY1AhoBTUP6O6AR0Ai8RmCobwHxiEf8rOavi18roWnoGl66tEbgv4hAn/u2ybJ76JiGHVWfhkDT0KcR1fVpBP45BPobNU2SNfUtCuO81aOhf+4T1g+kEfjTERjuzDSczw+C5HPr0ZCEQh9oBL4TAV5n0a3ZG0j0ZRLfu+9s+4t1V5FtmOw+fLGa49s1DR1jo698GIG+iBhxXS+4tXyobyGjlHquSyIY5vdVGjLGqOd6flptvvG8LZKAUkoJCbKyvKW3einBmzwOGCWeR+Oi7crEZ4wSGhf9eft5W6RoD6WUhfeFLXhXiguE+GlZ3dOsnKrldeoTz3VZWvVdmQaMUuLRQLVs036Xh4SlGwdvX0aUpcrjbG6a3vKuzEIfIKCUBhmW78uEgQU0nm0aR8A1kE7k7h5S4rkkErgAgBTQ32/j8WybUce2bcs0DMO0bNt2aNZgMd5kAXx4NCm7No/BMkLDXCHToSnSyIfTlBCWLCY+NqPjhnYw0ae+BQFehixpeB27hul60JWwP9eJa1jE91mUt0AtvAgsw4nrxYahSojlBHkHvae7M8swTJrNX/j25rOkgqqG3LdMy6ZZ05WxZ5lEllnq2jvi7d13bBIV0EBfRp5l+uKXnzcZtW0m+u1QhI5hGG4i+mGTsrAYwGliWDYJhcOky4hpB8VCkdv2NkwEHERfc1BfhJ7lBnfgj6FOCD5bd/dZ2nB029DbBAdgIH3IfR6wrONlaBkm3t7XKbVNVwV3a+DOe/xErKBQyavLWJD3OFkzLS8sur6MiS0hH+qMOZaHvy9QY5sSb8Jtp4FR09AuKvrk5xEYsE8IljG9WI53msQzDIvd2qlJ7DVWUM4W9HlgG0rXhp5uyJ40FAFNBS8ADZmGHZR8bBLPNL1kM+6Ya1z/74vQMS02TYpEn/WwyqGKXLgyD6qGnJmGHZbYHeuExtU41rFjmCSdjR+hy2967Lq5cZyYaADGO8NBvIo9c2lD0HhU/S+mUcXHAVjbnjmCV6FtmH6OPNjfGNApMqUdAjd2GTVNJyqPaXJrLLxvUm/1jHiKAg742bkx4FwnroQcP7LF4nGoU0aetqonZXvA63OfR4B3DYx2qsgBN8PctUf8QVWXgOGrLX9VRxw8gXd0/inGn+aZC8aRd003dyr0YEzjmLP2i/qX+mA4Noi22pSYhjV1aagPTZ/rH9qmh34NnLj8zmOXf+1FASYihNDk5VwMBxJrMyYD+xbgFKOfiRrHsUncBbyhazoueN8Ccn7zhexuySawFnh6LghuGbjOLbSpZxiG5RAmXn4Q33C4emyApqFjbPSVzyMAX1Hld3LkZWiv+noLHduTwwsYbayGFysuWNm35q/VpeM3UN2qflm0TT1zRZhwYuFHLCfGXxuOPLGk1BUh8TzvxHRsfDBDGggHPSxh2dIAGO0sI0VRcuL9matXt596A7NmU876lFvEZG3NT0DjMCg1ns7BlErEoaahB0j0ie9DAEcLy+8nTGrW33Hs68hCvO96jt3MpDc5eBI0Bk6foZXDILS3Ay+NnKyNvOvkTcfPI5wbSv2yKC8C6EzzhG8UP/1Y/9C1ouoth3IkNSeWQzdZm3rQFyFBAurLCDzWzwkCZnmHfXrjtRGsCLzAu7afx3Q4uJSzRtWSU8fHi/UHBIdWzBPDU01o39BJmHSxjyAwdZtlgiDGPsukRkwqYCzU3ViQD0gGVigdRTgJAhrjVUSTZuRVgr7oVkzuFq9MnaDz4pXVSCSmn8/zCSzPmzxvkFKUztTffcvAqUmT0kg8wWoKNIKbxjZsf5lw7rQuOUhcm5bJVs2v78I2NmMR3hU5+taAek05dJwfBtxBAB5U9MD769pPvKvA+6XMouUt0y/CI8GhyZvl/S5Pb5MLT1agHOjRkAKGPvxmBLa/n9tfWqQpGHEMZchwUAG9f1oW410REduCCUI/lBGDgQr4oi0vLvsGloDMycfTVzELzgXicKjBCea1fd5V94gxWADnZeiY09SirxLmwKgkbXidsGkShOMvY/Ju864IXUtxve9ACRz0MPwRTLRECGzvazNqWWxeCeN9Davj08o4cuXkOOurmFiGAWOxNmPTat3BvGnbxpP3yGOK90sWxYGqOrCVV8buRq2FjiHkwSf+fsjUdJOmoQW9P/yIP/nN/MNNn8wbct92gnyZLLUpsVYLWrxOmesSyiJcnIb7+ir1PQ88un5SdF2ZUNf1qD+F37T3gBBKqZ+UXXMPPNejlLBICfx5CU1fpqDZpIxRyoL4LuIIIACgzuACIVhhX2fMdT2CHAWVCu+wnyRgHkQ7Jc9VDrxOo2yXbl6ELw51FtLFwKzCyAXxXIgOPDTz47wRCBBfxhF1GbWc8OLKmIoYjrBWHvz5ap24689uvgD/+2rC1A+CIEzy5vnM87cX7NubT1zXsS1rM4hTn0kfgwvFMk3LtuTS7DEodUo913Fsa/fbc3zfv3hlKJNpuWbvX3h/nFGcR0EszIm5z/m7/oiSdboHx3TOz5SYLVguVKam32X9b4+Ghr7NISrsmmP9GI2+iPzg4dvV5b7zPKzsuMY/5grOaPa8qRsL+dA1N19MXpRL+8goBfThJQSmhbmvENml9n60MG8y3/OCvMl9U41Z+C4jfpuGljXHjzwhkrf02ckqm5TYji8j5OT5v+kAvbMn2RpDXtZlD5D5mxD4o2xF57odPl8U+6MsvmIMeJkN279lgUOyH2DaX6chETSrBIldQWtbVrjNvlEJvG3w595vQ1SetTyHBCrOpH8YmWdIfM+1JqUOvmzbtl0Ipv7XXry5oUMOFDY/8Wy/TkPbwJGvPDQvg5eh9F+p/xfv5Rc8EdtwFggp+zoyf7FA/Bc/N930KQSu0RD67GFlgoBQd+X1f6qBBlP66hb5oKkW6xrTcsnuVOOKNhefsgdtolQCgxCYJMLP1uUh6IA9Zb3wfZ33eNmwU5/BUSFAjIl1oDgNlSh9ccOhMSqzHyMDlRzLx/ds2sgyRZEp8uXFSshedfqcRmBG4AoNtTdqkxTJZygjV1nceq6BHke4bjs+pifgzY1Jle881ZjNwVXSS9rc5U6Me1eFAiBIYmHRY3TFLFt6X+d9UTSsGPbGIaDk2Ews8PYQF7dou8Va8iFKO8wudAhSISHseSYfP7J4w0QnxZlHtenzGgGBwAUaqmPXnDWGVezaZM6c8lwDPfImJZbhziHuwrcnokcepg/XtbnLB/kQT9XffR/CvtQ1jS/pvBWOeyoahiXz3RfEoMgXPY6wQ+JcabtBOy7VO09RemR2oTzaRJo9lY8voD4eXRWIP9agz2gENghcoiFIt2K5NIjSfFHCvNJA95AgZiUJ5MOkYZ4VRTKe7Q1trnyejb4GpxwtBHqpcxRQZL+h84aB1lXRsDTs+gEudKnrpOvsd0+NeWD2KYPPonNAe3aacIw5zc4ri68IxF/Vpa9rBK5pyvoi8ixDvEx3zh/yQgONY5RF97LCfDt9eEebKyvEzC+PYTVCG7TRxAg5zDJJeei7G533lwyTFp49QJpRZTxr7fhzYybSlcw+Tjlx1sg86LbFtO1knrALAvH5maevjf73n0dg/kas/p8dDQ1tVWKU+9A1ZRa4Jsj8oCZBM8qXXHRxqYGGbiHTwa2aVlLN8L4HHyfOJ96M2RShMpMgemgh0wq8FILppST7Qe+3GjBhsjhImwU0hTrvq4ZBlqcTr6NJGaxqqfGci7lD1w3PjVm0oryXGmtMnSGEhQKZM/Lx9We1vJPizFMC8eU+faQROETgHA2hvFjJogB6wClI8JUGWqRAWTTUaElf5WWPi8hIOm1KRfq4N7S505PNoTLwllciMZ3U/UDlmKZPxEBc1nlP6aQ2epMXouFDyF9ewHDpJZIKtUs4p2pSBtruJyjNMPCxjjE74KiQvYLMpok9+fiumZKDxNXXAvHdWvRJjcAagXM0BAo5N5xlyH0Ruq7Uy73QQI+40dq0wAbE0BRpgKv9OLnwkoY36SwIfkObOz0ODMpMCPjksEQvTcXYYT8fhjqBNTNR+LrOG/JOXBUNr3G+8m6t7U4ftd3HxmDmB3rrgImnNYFdZNZN7MnHdwx+SyC+U48+pRHYIHCOhkbe5hHE/ID6jbJQ7k6AtT3XQI8jb+4RRBrhvX6UFtPOAGIZn9A5bcFcmdA7n9Tmzs8DSbhBm01ZXMzZ0iGDeh6C6pqFYi8DKP2Wzvu6aHg27J3/L7TdT4wB/53tAgpSVr2PzMsmtna/LRDfVqTfawS2CJykoe1tn3s/Z/59XmN7C55ogpN/VNnzHJPjq+cwPb5fX9EI/CwCv05DP/u4urW/AwFIYvpoKezBRSE1EOwllm2yrPPmHvvEtS3b8WiQlkpSnnVNkOnMCor1yf/Qu66IYQXFo5E6bfhdADQN/S7+uvUVArzvmvIWM8fa5D0dR14nnuVFYtc93qTUWpImjmObUQ/38eJDk2NciT3v+bNqYNrpwvzP0hCsLrnxHSKKd/Pcb9D6obeahn4IaN3MSwTq2HNcwgLmwn6Ic9rT6TZ0vivhX6D1lRv/QRZoL16GRxgWBRtuPEjdwLtvGMZ/lYZEeH5YtGUShukC2MvP5psLaBr6ZoB19ZcRgD0xtjSEeZ8dNafGdAYVzBicpiZuxygykcFebb6/+zQMqfmfpaGd4FYVn1871jT0a9Drhg8Q2KEhjDFTQzqneKhp7yBUWi8ix2lDCti+VEm5hKFjUdXB1l5PR0P/bkoTkd/+4t7RB5/SR09rGvoonLqyDyCwQ0PYf+aIWdGE0LS4U0KXTbOoMNrQVhlR2EEZIzyf0pDc31nlMNzdnj7sq6G2290xqQyJ8o5DTnhIaeO5LsV9ProigcVe6rkkuG13tR7AvQ7FCQ3vVZGlq5T+fZVFPiWeR4Ks7ppbyCDTjpK6RjVi/5iXkevYtmXChNSCTDgu7iYNpcFs4rkkKtquTMAMyOIzBdVANHBf3ZKAQcgNITRc5fdZ0vtQP6vqO4TsrVHbt2d7VtPQFhH9/rcR2KEhVB8qCQ6gd+DmoM5eqk0IzjRg555ltY3XMRVZHc7QkAg4g8185j71OqVJfw/YrRPJRD2gE9yNAsVENvV9PxZrdyKadJEzjiNEA0vfO4px5C70EOVWRRR979NuSJYXln178x1T2b7t5CeGLjNlB0i4rc8DlgmzTcsN7m1fw15L876THehIHZZN25XwInBkfP9eeh9yUpa4sVjT0AYQ/fbXERA0tPo+X6EhWFIzTTcUa2riaZqU+tPGZSdpaGGiYXzNQTANZLC9PQ7bLLpsBATJEQxlVyRsXkm60oLPXGbBmfJBLJ25AZ3T5GhHEQ8oBYY8sEx7fqDTn9djDoq12TYOkEB9ZTooXMdN3AxHjptAoUDolNL9RXqf01ZhQU1D1/DSpb8fgR0aOp6UbR0dkEdJER6htW3GmEzsfp6GJiYihNBkSWxz8PxDB2rqh56+SI3FfVMy3/vELEMR2o8y5nkoAoOhVgZQfdmxM9GYojEYx5XZy266aOxQgMbasD0UTzDG/DDNIU0OjEVxVWBOPya0CdOutuJBr/3VNHQNL136+xFAGloGBNAgdu+NrwddzXQ1aBrbG3OJsnIP93Z3nyZLwuJrNFSExPM83HL+zINPckU5GcTG5sSfUMF6qUo8ljI2whNLfju1ySeX1GLHxyIfXriXwH+rshSVQH6ZrZt/rn4nvY8NS5UPERLzDc//axp6jo+++vMI7NDQiLMytT+LMyvX0FDFhCa4uTsY3d2CuMQBCuYph1zl8EI3rfDTUjlE2n1ImU7gdEqTJvUgw5/czEJJM4Mt8GVD+KHrekxbDOFNswdqlHzAe0zZt9i13ROhh5wvl15rBlRvnXLzSLOnazjg2V8DeEjvo2Y4Vas+eaxp6CRQutiPIbBHQyO6LJSYRuzhbix9yLy9+WzhoBGW58kmvww+gfiNfxlFLTlIPPaplCY4bVLGNuMmFR/aLPLZNQmNSi7mWXKxD2c6SGNTrmIYyTkmjo6QRMjs2u5zf5lmnvtgkDlU4+RtD2ZPVzDDjDJBhNNDnaVFD6NTmXEMTuOvxG7lspWnB5qGnsKjL/48ArgEZm4WdCYxh3sg5oDVJtNyXFekAHdxQ/L9BHo17AS4iSjaPuR7KU0epk2bHJ6YIhDSIfPuHjBkFCgxZfvl7T30LAxp4n0eYBZ1gMK02a3tigB2DxdTUN7eAxbLUd/W+IP3hztModmWTHSu3A4x16aXzFTfw4I8hh9AtkPfms3pihiysqqjOqWSU4eahk7BpAv9AAJtxhzHsS3LxJdlO47jqYHTQtqKGWP8IJnzxUxpbh+zq25/nWFoIauH2g8GFO+mNAGhiBsp9FDHrr2a+A1lTF2PUH9JRtMVMfU8cIMHadV3RUQgXc28+9ZQJWKLqPDedGWCNxPqJ+oq4LlPBsYrq4zw8jZIJubI9GHyNB5ggh/Po8yHvDtRpgiGl/Q+LAqppcawr+s4807T0BmUdBmNwJ+IQJdHT/LfxHOev9nHv5lgfeyJpnikrW/pQv2ahi6ApYtqBP4yBHoYXtGkqhPXdPdcZR94noflwOt1ahq6jpm+QyPwlyAw+dmSe+ItUYgfth0TmasbybxRv6ahN0DTt2gE/hIEcDQE3qhU8Vl9zPYWthZ2xMu2HV9Rz1xrQ9PQNbx0aY2ARuDjCGga+jikukKNgEbgGgKahq7hpUtrBDQCH0dA09DHIdUVagQ0AtcQ0DR0DS9dWiOgEfg4ApqGPg6prlAjoBG4hoCmoWt46dIaAY3AxxHQNPRxSHWFGgGNwDUE/g/K+mgQnGy35wAAAABJRU5ErkJggg==;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-123\&quot;&gt;&lt;mxGeometry y=\&quot;30\&quot; width=\&quot;450\&quot; height=\&quot;104.35\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-125\&quot; value=\&quot;&amp;lt;div&amp;gt;void add_to_task_demand(struct rq *rq,&amp;amp;nbsp;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;struct task_struct *p,&amp;lt;span&amp;gt;u64 delta)&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;\&quot; style=\&quot;swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;labelBackgroundColor=none;html=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1760.5\&quot; y=\&quot;935\&quot; width=\&quot;240\&quot; height=\&quot;80\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle x=\&quot;1720.5\&quot; y=\&quot;900\&quot; width=\&quot;250\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-126\&quot; value=\&quot;delta = scale_exec_time(delta, rq);&amp;#10;&amp;#9;p-&amp;gt;ravg.sum += delta;&amp;#10;p-&amp;gt;ravg.sum_latest += delta;&amp;#10;\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-125\&quot;&gt;&lt;mxGeometry y=\&quot;26\&quot; width=\&quot;240\&quot; height=\&quot;54\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-127\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-128\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-190\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-128\&quot; value=\&quot;/**更新rq-&amp;amp;gt;curr_runnable_sum，rq-&amp;amp;gt;prev_runnble_sum，&amp;lt;br&amp;gt;p-&amp;amp;gt;ravg-&amp;amp;gt;curr_window，p-&amp;amp;gt;ravg-&amp;amp;gt;prev_window**/&amp;lt;br&amp;gt;&amp;lt;b&amp;gt;update_cpu_busy_time(p, rq, event, wallclock, irqtime);&amp;lt;/b&amp;gt;\&quot; style=\&quot;whiteSpace=wrap;html=1;rounded=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;630\&quot; y=\&quot;605\&quot; width=\&quot;360\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-129\&quot; value=\&quot;void walt_set_window_start(struct rq *rq, struct rq_flags *rf)\&quot; style=\&quot;swimlane;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;rounded=1;fontSize=14;fontStyle=0;strokeWidth=2;resizeParent=0;resizeLast=1;shadow=0;dashed=0;align=center;fillColor=#FFFFFF;strokeOpacity=100;fillOpacity=0;swimlaneFillColor=#FFFF99;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;470\&quot; y=\&quot;45\&quot; width=\&quot;390\&quot; height=\&quot;250\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle x=\&quot;430\&quot; y=\&quot;10\&quot; width=\&quot;400\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-130\&quot; value=\&quot;/**设置WALT窗口开始**/&amp;#10;{&amp;#10; if (likely(rq-&amp;gt;window_start))//若已经设置，直接返回&amp;#10;  return;&amp;#10;&amp;#10; if (cpu_of(rq) == sync_cpu) {&amp;#10;  rq-&amp;gt;window_start = 1;//cpu0 rq开始&amp;#10; } else {&amp;#10;//保证每个CPU窗口开始时间同步&amp;#10;  rq-&amp;gt;window_start = sync_rq-&amp;gt;window_start;&amp;#10;  rq-&amp;gt;curr_runnable_sum = rq-&amp;gt;prev_runnable_sum = 0; &amp;#10; }&amp;#10;/**设置进程p的开始标记时间与窗口开始时间相等**/&amp;#10; rq-&amp;gt;curr-&amp;gt;ravg.mark_start = rq-&amp;gt;window_start;&amp;#10;}\&quot; style=\&quot;align=left;strokeColor=none;fillColor=none;spacingLeft=4;fontSize=12;verticalAlign=top;resizable=0;rotatable=0;part=1;fontStyle=0\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-129\&quot;&gt;&lt;mxGeometry y=\&quot;30\&quot; width=\&quot;390\&quot; height=\&quot;220\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-131\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-132\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-135\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-132\&quot; value=\&quot;/**用以检测有无新窗口**/&amp;lt;br&amp;gt;new_window = mark_start &amp;amp;lt; window_start;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;320\&quot; y=\&quot;466.35\&quot; width=\&quot;230\&quot; height=\&quot;53\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-133\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=17;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-135\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-137\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-134\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=17;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-135\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-141\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-135\&quot; value=\&quot;new_window?\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;380\&quot; y=\&quot;545\&quot; width=\&quot;100\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-136\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=17;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-137\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-144\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-137\&quot; value=\&quot;1、计算nr_full_windows&amp;lt;br&amp;gt;2、p-&amp;amp;gt;ravg.active_windows++;\&quot; style=\&quot;whiteSpace=wrap;html=1;rounded=0;strokeWidth=2;fillColor=#FFFFFF;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;120\&quot; y=\&quot;555\&quot; width=\&quot;190\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-138\&quot; value=\&quot;有\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;325\&quot; y=\&quot;555\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-139\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-141\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-153\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-140\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-141\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-158\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-141\&quot; value=\&quot;判断是否需要统计CPU时间account_busy_for_cpu_time(rq, p, irqtime, event)\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;300\&quot; y=\&quot;810\&quot; width=\&quot;260\&quot; height=\&quot;90\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-142\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=17;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-144\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-146\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-143\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-144\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-148\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-144\&quot; value=\&quot;&amp;lt;span&amp;gt;nr_full_windows？&amp;lt;/span&amp;gt;\&quot; style=\&quot;rhombus;whiteSpace=wrap;html=1;rounded=0;strokeWidth=2;fillColor=#FFFFFF;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;150\&quot; y=\&quot;615\&quot; width=\&quot;130\&quot; height=\&quot;50\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-145\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-146\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;340\&quot; y=\&quot;795\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;Array as=\&quot;points\&quot;&gt;&lt;mxPoint x=\&quot;215\&quot; y=\&quot;795\&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-146\&quot; value=\&quot;&amp;lt;div&amp;gt;p-&amp;amp;gt;ravg.prev_window =&amp;amp;nbsp;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;p-&amp;amp;gt;ravg.curr_window;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;p-&amp;amp;gt;ravg.curr_window = 0;&amp;lt;/div&amp;gt;\&quot; style=\&quot;whiteSpace=wrap;html=1;rounded=0;strokeWidth=2;fillColor=#FFFFFF;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;142.5\&quot; y=\&quot;715\&quot; width=\&quot;145\&quot; height=\&quot;50\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-147\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-148\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;430\&quot; y=\&quot;795\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;Array as=\&quot;points\&quot;&gt;&lt;mxPoint x=\&quot;340\&quot; y=\&quot;795\&quot;/&gt;&lt;mxPoint x=\&quot;430\&quot; y=\&quot;795\&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-148\&quot; value=\&quot;&amp;lt;div&amp;gt;p-&amp;amp;gt;ravg.prev_window = 0;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;p-&amp;amp;gt;ravg.curr_window = 0;&amp;lt;/div&amp;gt;\&quot; style=\&quot;whiteSpace=wrap;html=1;rounded=0;strokeWidth=2;fillColor=#FFFFFF;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;270\&quot; y=\&quot;652.5\&quot; width=\&quot;150\&quot; height=\&quot;32.5\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-149\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=17;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-146\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-146\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-150\&quot; value=\&quot;大于1\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;275\&quot; y=\&quot;615\&quot; width=\&quot;65\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-151\&quot; value=\&quot;小于1\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=15;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;210\&quot; y=\&quot;673.5\&quot; width=\&quot;65\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-152\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-153\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-155\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-153\&quot; value=\&quot;如果没有新窗口，则直接返回;&amp;lt;br&amp;gt;若p是当前的进程，则更新：&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;if (!nr_full_windows) {&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;prev_sum = rq-&amp;amp;gt;curr_runnable_sum;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;}&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;rq-&amp;amp;gt;prev_runnable_sum = prev_sum;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;rq-&amp;amp;gt;curr_runnable_sum = 0;&amp;lt;/div&amp;gt;\&quot; style=\&quot;whiteSpace=wrap;html=1;rounded=0;strokeWidth=2;fillColor=#FFFFFF;align=left;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;50\&quot; y=\&quot;825\&quot; width=\&quot;220\&quot; height=\&quot;110\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-154\&quot; value=\&quot;否\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;270\&quot; y=\&quot;835\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-155\&quot; value=\&quot;返回\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;130\&quot; y=\&quot;955\&quot; width=\&quot;50\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-156\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-158\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-161\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-157\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-158\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-166\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-158\&quot; value=\&quot;是否有new_window\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;360\&quot; y=\&quot;980\&quot; width=\&quot;140\&quot; height=\&quot;55\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-159\&quot; value=\&quot;是\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;430\&quot; y=\&quot;930\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-160\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-161\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-163\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-161\&quot; value=\&quot;/**由于没有新窗口，直接由delta计算WALT时间，然后累加至rq-&amp;amp;gt;curr_runnable_sum和&amp;lt;br&amp;gt;p-&amp;amp;gt;ravg.curr_window中**/&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;delta = wallclock - mark_start;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;或者&amp;lt;span&amp;gt;delta = irqtime;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;delta = scale_exec_time(delta, rq);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;b&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;rq-&amp;amp;gt;curr_runnable_sum += delta;&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;b&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;p-&amp;amp;gt;ravg.curr_window += delta;&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;\&quot; style=\&quot;whiteSpace=wrap;html=1;rounded=0;strokeWidth=2;fillColor=#FFFFFF;align=left;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;50\&quot; y=\&quot;995\&quot; width=\&quot;270\&quot; height=\&quot;120\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-162\&quot; value=\&quot;否\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;330\&quot; y=\&quot;985\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-163\&quot; value=\&quot;返回\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;165\&quot; y=\&quot;1135\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-164\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-166\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-169\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;Array as=\&quot;points\&quot;&gt;&lt;mxPoint x=\&quot;205\&quot; y=\&quot;1148\&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-165\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-166\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-174\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-166\&quot; value=\&quot;进程是否是当前就绪队列正在&amp;lt;br&amp;gt;运行的进程\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;330\&quot; y=\&quot;1115\&quot; width=\&quot;200\&quot; height=\&quot;65\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-167\&quot; value=\&quot;是\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;430\&quot; y=\&quot;1075\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-168\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-169\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-171\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-169\&quot; value=\&quot;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;/**更新prev窗口的数据**/&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;if (!nr_full_windows) {&amp;lt;/span&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp;delta = scale_exec_time(window_start - mark_start, rq);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;if (!exiting_task(p))&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp; &amp;amp;nbsp; &amp;lt;b&amp;gt;p-&amp;amp;gt;ravg.prev_window += delta;&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;} else {//中间跨越了多个窗口，计算一整个window&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp; delta = scale_exec_time(window_size, rq);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;if (!exiting_task(p))&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp; &amp;lt;b&amp;gt;p-&amp;amp;gt;ravg.prev_window = delta&amp;lt;/b&amp;gt;;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;}&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;b style=&amp;quot;background-color: rgb(255 , 255 , 51)&amp;quot;&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;rq-&amp;amp;gt;prev_runnable_sum += delta;&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;/**更新当前窗口的数据**/&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;delta = scale_exec_time(wallclock - window_start, rq);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;b&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;background-color: rgb(255 , 255 , 51)&amp;quot;&amp;gt;rq-&amp;amp;gt;curr_runnable_sum += delta&amp;lt;/span&amp;gt;;&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;if (!exiting_task(p))&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;b&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;p-&amp;amp;gt;ravg.curr_window = delta;&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;\&quot; style=\&quot;whiteSpace=wrap;html=1;rounded=0;strokeWidth=2;fillColor=#FFFFFF;align=left;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;50\&quot; y=\&quot;1195\&quot; width=\&quot;310\&quot; height=\&quot;235\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-170\&quot; value=\&quot;否\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;287.5\&quot; y=\&quot;1150\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-171\&quot; value=\&quot;返回\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;185\&quot; y=\&quot;1460\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-172\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-174\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;719.9999999999995\&quot; y=\&quot;1185\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;Array as=\&quot;points\&quot;&gt;&lt;mxPoint x=\&quot;540\&quot; y=\&quot;1448\&quot;/&gt;&lt;mxPoint x=\&quot;540\&quot; y=\&quot;1175\&quot;/&gt;&lt;mxPoint x=\&quot;720\&quot; y=\&quot;1175\&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-173\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-174\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-180\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-174\&quot; value=\&quot;进程是否是idle进程\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;330\&quot; y=\&quot;1415\&quot; width=\&quot;200\&quot; height=\&quot;65\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-175\&quot; value=\&quot;是\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;430\&quot; y=\&quot;1215\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-176\&quot; value=\&quot;否\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;510\&quot; y=\&quot;1395\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-177\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-178\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-179\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-178\&quot; value=\&quot;&amp;lt;div&amp;gt;/**更新prev窗口数据&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;if (!nr_full_windows) {&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp;delta = scale_exec_time(window_start - mark_start, rq);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;if (!is_idle_task(p) &amp;amp;amp;&amp;amp;amp; !exiting_task(p))&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp; &amp;lt;b&amp;gt;p-&amp;amp;gt;ravg.prev_window += delta;&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;background-color: rgb(255 , 255 , 153)&amp;quot;&amp;gt;&amp;lt;b&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp;delta += rq-&amp;amp;gt;curr_runnable_sum;&amp;lt;/b&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;} else {&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp;delta = scale_exec_time(window_size, rq);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;if (!is_idle_task(p) &amp;amp;amp;&amp;amp;amp; !exiting_task(p))&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp;&amp;lt;b&amp;gt;p-&amp;amp;gt;ravg.prev_window = delta;&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;}&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;b style=&amp;quot;background-color: rgb(255 , 255 , 153)&amp;quot;&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;rq-&amp;amp;gt;prev_runnable_sum = delta;&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;/* 更新当前窗口数据. */&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;delta = scale_exec_time(wallclock - window_start, rq);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;&amp;lt;b style=&amp;quot;background-color: rgb(255 , 255 , 153)&amp;quot;&amp;gt;rq-&amp;amp;gt;curr_runnable_sum = delta&amp;lt;/b&amp;gt;;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;if (!is_idle_task(p) &amp;amp;amp;&amp;amp;amp; !exiting_task(p))&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;&amp;lt;b&amp;gt;p-&amp;amp;gt;ravg.curr_window = delta&amp;lt;/b&amp;gt;;&amp;lt;/div&amp;gt;\&quot; style=\&quot;whiteSpace=wrap;html=1;rounded=0;strokeWidth=2;fillColor=#FFFFFF;align=left;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;560\&quot; y=\&quot;1190\&quot; width=\&quot;310\&quot; height=\&quot;245\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-179\&quot; value=\&quot;返回\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;695\&quot; y=\&quot;1460\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-180\&quot; value=\&quot;&amp;lt;div&amp;gt;&amp;lt;b&amp;gt;mark_start = wallclock - irqtime;&amp;lt;/b&amp;gt;//计算开始时间&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;b&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;rq-&amp;amp;gt;prev_runnable_sum = rq-&amp;amp;gt;curr_runnable_sum;&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;if (mark_start &amp;amp;gt; window_start) {&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;b&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;rq-&amp;amp;gt;curr_runnable_sum = scale_exec_time(irqtime, rq);&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;return;&amp;lt;span&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;delta = window_start - mark_start;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;if (delta &amp;amp;gt; window_size)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;delta = window_size;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;delta = scale_exec_time(delta, rq);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;b&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;rq-&amp;amp;gt;prev_runnable_sum += delta;&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;delta = wallclock - window_start;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;b&amp;gt;&amp;lt;span&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;rq-&amp;amp;gt;curr_runnable_sum = scale_exec_time(delta, rq);&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;\&quot; style=\&quot;whiteSpace=wrap;html=1;rounded=0;strokeWidth=2;fillColor=#FFFFFF;align=left;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;235\&quot; y=\&quot;1495\&quot; width=\&quot;390\&quot; height=\&quot;190\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-181\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;50\&quot; y=\&quot;455\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;589.9999999999995\&quot; y=\&quot;455\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-182\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;589.9999999999995\&quot; y=\&quot;1145\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;589.9999999999995\&quot; y=\&quot;455\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-183\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;599.9999999999995\&quot; y=\&quot;1145\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;919.9999999999995\&quot; y=\&quot;1145\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-184\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;909.9999999999995\&quot; y=\&quot;1685\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;909.9999999999995\&quot; y=\&quot;1145\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-185\&quot; value=\&quot;&amp;lt;span style=&amp;quot;font-size: 12px ; text-align: center&amp;quot;&amp;gt;update_cpu_busy_time(p, rq, event, wallclock, irqtime)&amp;lt;/span&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;strokeWidth=2;gradientColor=none;fontSize=15;align=left;fontStyle=1;fillColor=#FFFF33;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;50\&quot; y=\&quot;466.35\&quot; width=\&quot;250\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-186\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-187\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-192\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-187\&quot; value=\&quot;\&quot; style=\&quot;shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png,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;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;624.9999999999999\&quot; y=\&quot;822\&quot; width=\&quot;369.82\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-188\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-190\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-187\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-189\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=11;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-190\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-194\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;Array as=\&quot;points\&quot;&gt;&lt;mxPoint x=\&quot;610\&quot; y=\&quot;740\&quot;/&gt;&lt;mxPoint x=\&quot;610\&quot; y=\&quot;1075\&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-190\&quot; value=\&quot;rq-&amp;amp;gt;window_start &amp;amp;gt; old_window_start\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;745\&quot; y=\&quot;690\&quot; width=\&quot;130\&quot; height=\&quot;100\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-191\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=15;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-192\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-194\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-192\&quot; value=\&quot;&amp;lt;div style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;/**根据busy_limit更新&amp;lt;b style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;rq-&amp;amp;gt;is_busy&amp;lt;/b&amp;gt;**/&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;if (rq-&amp;amp;gt;prev_runnable_sum &amp;amp;gt;= busy_limit) {&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp;if (rq-&amp;amp;gt;is_busy == CPU_BUSY_CLR)&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp; &amp;amp;nbsp; &amp;amp;nbsp;rq-&amp;amp;gt;is_busy = CPU_BUSY_PREPARE;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp;else if (rq-&amp;amp;gt;is_busy == CPU_BUSY_PREPARE)&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp; &amp;amp;nbsp; &amp;amp;nbsp;rq-&amp;amp;gt;is_busy = CPU_BUSY_SET;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;} else if (rq-&amp;amp;gt;is_busy != CPU_BUSY_CLR) {&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; rq-&amp;amp;gt;is_busy = CPU_BUSY_CLR;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 11px;&amp;quot;&amp;gt;&amp;#9;&amp;#9;&amp;lt;/span&amp;gt;}&amp;lt;/div&amp;gt;\&quot; style=\&quot;whiteSpace=wrap;html=1;verticalAlign=top;labelBackgroundColor=#ffffff;align=left;fontSize=11;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;669.91\&quot; y=\&quot;890\&quot; width=\&quot;280\&quot; height=\&quot;130\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-193\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;fontSize=11;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;aKIcrOc--AUVgdW24dix-194\&quot; target=\&quot;aKIcrOc--AUVgdW24dix-196\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-194\&quot; value=\&quot;/**更新p的标记开始点mark_start**/&amp;lt;br&amp;gt;p-&amp;amp;gt;ravg.mark_start = wallclock;\&quot; style=\&quot;whiteSpace=wrap;html=1;verticalAlign=top;labelBackgroundColor=#ffffff;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;685\&quot; y=\&quot;1055\&quot; width=\&quot;250\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-195\&quot; value=\&quot;是\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;430\&quot; y=\&quot;1475\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-196\&quot; value=\&quot;结束\&quot; style=\&quot;strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#FFFFFF;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;780\&quot; y=\&quot;1110\&quot; width=\&quot;60\&quot; height=\&quot;35\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-197\&quot; value=\&quot;是\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;800\&quot; y=\&quot;790\&quot; width=\&quot;40\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-198\&quot; value=\&quot;sum_history\&quot; style=\&quot;shape=table;html=1;whiteSpace=wrap;startSize=30;container=1;collapsible=0;childLayout=tableLayout;fixedRows=1;rowLines=0;fontStyle=1;align=center;rounded=0;labelBackgroundColor=none;strokeWidth=2;fillColor=#FFFFFF;gradientColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2000.5\&quot; y=\&quot;325\&quot; width=\&quot;110\&quot; height=\&quot;200\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-199\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=1;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-198\&quot;&gt;&lt;mxGeometry y=\&quot;30\&quot; width=\&quot;110\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-200\&quot; value=\&quot;0\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-199\&quot;&gt;&lt;mxGeometry width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-201\&quot; value=\&quot;prev0\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=6;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-199\&quot;&gt;&lt;mxGeometry x=\&quot;40\&quot; width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-202\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=1;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-198\&quot;&gt;&lt;mxGeometry y=\&quot;60\&quot; width=\&quot;110\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-203\&quot; value=\&quot;1\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-202\&quot;&gt;&lt;mxGeometry width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-204\&quot; value=\&quot;prev1\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=6;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-202\&quot;&gt;&lt;mxGeometry x=\&quot;40\&quot; width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-205\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=1;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-198\&quot;&gt;&lt;mxGeometry y=\&quot;90\&quot; width=\&quot;110\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-206\&quot; value=\&quot;2\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-205\&quot;&gt;&lt;mxGeometry width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-207\&quot; value=\&quot;prev2\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=6;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-205\&quot;&gt;&lt;mxGeometry x=\&quot;40\&quot; width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-208\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=1;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-198\&quot;&gt;&lt;mxGeometry y=\&quot;120\&quot; width=\&quot;110\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-209\&quot; value=\&quot;3\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-208\&quot;&gt;&lt;mxGeometry width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-210\&quot; value=\&quot;prev3\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=6;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-208\&quot;&gt;&lt;mxGeometry x=\&quot;40\&quot; width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-211\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=1;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-198\&quot;&gt;&lt;mxGeometry y=\&quot;150\&quot; width=\&quot;110\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-212\&quot; value=\&quot;4\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-211\&quot;&gt;&lt;mxGeometry width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-213\&quot; value=\&quot;prev4\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=6;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-211\&quot;&gt;&lt;mxGeometry x=\&quot;40\&quot; width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-214\&quot; value=\&quot;sum_history\&quot; style=\&quot;shape=table;html=1;whiteSpace=wrap;startSize=30;container=1;collapsible=0;childLayout=tableLayout;fixedRows=1;rowLines=0;fontStyle=1;align=center;rounded=0;labelBackgroundColor=none;strokeWidth=2;fillColor=#FFFFFF;gradientColor=none;fontSize=17;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;2180.5\&quot; y=\&quot;325\&quot; width=\&quot;110\&quot; height=\&quot;200\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-215\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=1;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-214\&quot;&gt;&lt;mxGeometry y=\&quot;30\&quot; width=\&quot;110\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-216\&quot; value=\&quot;0\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-215\&quot;&gt;&lt;mxGeometry width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-217\&quot; value=\&quot;runtime\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=6;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-215\&quot;&gt;&lt;mxGeometry x=\&quot;40\&quot; width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-218\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=1;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-214\&quot;&gt;&lt;mxGeometry y=\&quot;60\&quot; width=\&quot;110\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-219\&quot; value=\&quot;1\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-218\&quot;&gt;&lt;mxGeometry width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-220\&quot; value=\&quot;prev0\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=6;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-218\&quot;&gt;&lt;mxGeometry x=\&quot;40\&quot; width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-221\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=1;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-214\&quot;&gt;&lt;mxGeometry y=\&quot;90\&quot; width=\&quot;110\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-222\&quot; value=\&quot;2\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-221\&quot;&gt;&lt;mxGeometry width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-223\&quot; value=\&quot;prev1\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=6;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-221\&quot;&gt;&lt;mxGeometry x=\&quot;40\&quot; width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-224\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=1;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-214\&quot;&gt;&lt;mxGeometry y=\&quot;120\&quot; width=\&quot;110\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-225\&quot; value=\&quot;3\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-224\&quot;&gt;&lt;mxGeometry width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-226\&quot; value=\&quot;prev2\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=6;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-224\&quot;&gt;&lt;mxGeometry x=\&quot;40\&quot; width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-227\&quot; value=\&quot;\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=1;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-214\&quot;&gt;&lt;mxGeometry y=\&quot;150\&quot; width=\&quot;110\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-228\&quot; value=\&quot;4\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-227\&quot;&gt;&lt;mxGeometry width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;40\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;aKIcrOc--AUVgdW24dix-229\&quot; value=\&quot;prev3\&quot; style=\&quot;shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=6;overflow=hidden;\&quot; vertex=\&quot;1\&quot; parent=\&quot;aKIcrOc--AUVgdW24dix-227\&quot;&gt;&lt;mxGeometry x=\&quot;40\&quot; width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxRectangle width=\&quot;70\&quot; height=\&quot;30\&quot; as=\&quot;alternateBounds\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;&lt;/diagram&gt;&lt;/mxfile&gt;&quot;,&quot;toolbar&quot;:&quot;pages zoom layers lightbox&quot;,&quot;page&quot;:0}"></div>
<a style="position:absolute;top:50%;left:50%;margin-top:-128px;margin-left:-64px;" href="https://app.diagrams.net/#Hxw-yan%2Fdraw-io%2Fmaster%2Fwalt.drawio.html#%7B%22pageId%22%3A%22EuRNjG0Wj1TW9SeWv2jt%22%7D" target="_blank"><img border="0" src="https://app.diagrams.net/images/drawlogo128.png"/></a>
</body>
</html>
